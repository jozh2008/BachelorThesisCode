<tool name="OTB.ClassificationMapRegularization" id="otb_classificationmapregularization" version="1.0.0">
  <description>Filters the input labeled image using Majority Voting in a ball shaped neighbordhood.</description>
  <requirements>
    <requirement version="3.9" type="package">python</requirement>
  </requirements>
  <version_command><![CDATA[interpreter filename.exe --version]]></version_command>
  <command><![CDATA[$__tool_directory__/Code/openapi.py isArrayio_in False  output_data_io_out $output_data_io_out  name OTB.ClassificationMapRegularization io_in $io_in
io_out $io_out
ip_radius $ip_radius
ip_suvbool $ip_suvbool
ip_nodatalabel $ip_nodatalabel
ip_undecidedlabel $ip_undecidedlabel
ip_onlyisolatedpixels $ip_onlyisolatedpixels
ip_isolatedthreshold $ip_isolatedthreshold
ram $ram
prefer $prefer
response $response
outputType_io_out $OutputSection_io_out.outputType_io_out
transmissionMode_io_out $OutputSection_io_out.transmissionMode_io_out]]></command>
  <inputs>
    <param name="io_in" type="data" optional="false" label="The input labeled image to regularize." help="The input labeled image to regularize. The following data types are allowed in the txt file:  jpeg, tiff, png" format="txt"/>
    <param name="io_out" type="select" optional="false" label="The output regularized labeled image." help="The output regularized labeled image.">
      <option value="double">double</option>
      <option value="float">float</option>
      <option value="int16">int16</option>
      <option value="int32">int32</option>
      <option value="uint16">uint16</option>
      <option selected="true" value="uint8">uint8</option>
    </param>
    <param name="ip_radius" type="integer" value="1" optional="false" label="The radius of the ball shaped structuring element (expressed in pixels). By default, 'ip.radius = 1 pixel'." help="The radius of the ball shaped structuring element (expressed in pixels). By default, 'ip.radius = 1 pixel'."/>
    <param name="ip_suvbool" type="select" optional="false" label="Pixels with more than 1 majority class are marked as Undecided if this parameter is checked (true), or keep their Original labels otherwise (false). Please note that the Undecided value must be different from existing labels in the input labeled image. By default, 'ip.suvbool = false'." help="Pixels with more than 1 majority class are marked as Undecided if this parameter is checked (true), or keep their Original labels otherwise (false). Please note that the Undecided value must be different from existing labels in the input labeled image. By default, 'ip.suvbool = false'.">
      <option selected="true" value="false">false</option>
      <option value="true">true</option>
    </param>
    <param name="ip_nodatalabel" type="integer" value="0" optional="false" label="Label for the NoData class. Such input pixels keep their NoData label in the output image. By default, 'ip.nodatalabel = 0'." help="Label for the NoData class. Such input pixels keep their NoData label in the output image. By default, 'ip.nodatalabel = 0'."/>
    <param name="ip_undecidedlabel" type="integer" value="0" optional="false" label="Label for the Undecided class. By default, 'ip.undecidedlabel = 0'." help="Label for the Undecided class. By default, 'ip.undecidedlabel = 0'."/>
    <param name="ip_onlyisolatedpixels" type="select" optional="false" label="Only pixels whose label is unique in the neighbordhood will be processed. By default, 'ip.onlyisolatedpixels = false'." help="Only pixels whose label is unique in the neighbordhood will be processed. By default, 'ip.onlyisolatedpixels = false'.">
      <option selected="true" value="false">false</option>
      <option value="true">true</option>
    </param>
    <param name="ip_isolatedthreshold" type="integer" value="1" optional="false" label="Maximum number of neighbours with the same label as the center pixel to consider that it is an isolated pixel. By default, 'ip.isolatedthreshold = 1'." help="Maximum number of neighbours with the same label as the center pixel to consider that it is an isolated pixel. By default, 'ip.isolatedthreshold = 1'."/>
    <param name="ram" type="integer" value="128" optional="true" label="Available memory for processing (in MB)" help="Available memory for processing (in MB)"/>
    <param name="prefer" type="select" label="Choose the Prefer">
      <option selected="true" value="respond-async;return=representation">respond-async;return=representation</option>
      <option value="return=minimal">return=minimal</option>
      <option value="return=representation">return=representation</option>
    </param>
    <param name="response" type="select" label="Response Type" help="Choose 'raw' for raw data or 'document' for document data.">
      <option selected="true" value="document">document</option>
      <option value="raw">raw</option>
    </param>
    <section name="OutputSection_io_out" title="Select the appropriate transmission mode for the output format" expanded="true">
      <param name="outputType_io_out" type="select" label="Author did not provide help for this parameter... ">
        <option value="image/jpeg">jpeg</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_io_out" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
  </inputs>
  <outputs>
    <data name="output_data_io_out" format="tiff" label="output_data_io_out" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_io_out" format="jpeg" value="image/jpeg"/>
        <when input="outputType_io_out" format="png" value="image/png"/>
      </change_format>
    </data>
  </outputs>
  <tests>
    <test>
      <param name="response" value="document"/>
      <output name="output_data_io_out" ftype="txt" value="output_data_io_out.txt"/>
    </test>
  </tests>
  <help><![CDATA[This application filters the input labeled image (with a maximal class label = 65535) using Majority Voting in a ball shaped neighbordhood. Majority Voting takes the more representative value of all the pixels identified by the ball shaped structuring element and then sets the center pixel to this majority label value.    -NoData is the label of the NOT classified pixels in the input image. These input pixels keep their NoData label in the output image.    -Pixels with more than 1 majority class are marked as Undecided if the parameter 'ip.suvbool == true', or keep their Original labels otherwise.]]></help>
  <citations>
    <citation type="bibtex">Josh</citation>
  </citations>
</tool>
