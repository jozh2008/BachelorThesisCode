<tool name="SAGA.grid_filter.7" id="saga_grid_filter_7" version="1.0.0">
  <description>DTM Filter (slope-based)</description>
  <requirements>
    <requirement version="3.9" type="package">python</requirement>
  </requirements>
  <version_command><![CDATA[interpreter filename.exe --version]]></version_command>
  <command><![CDATA[$__tool_directory__/Code/openapi.py isArrayINPUT False  output_data_GROUND $output_data_GROUND  output_data_NONGROUND $output_data_NONGROUND  name SAGA.grid_filter.7 INPUT $INPUT
RADIUS $RADIUS
TERRAINSLOPE $TERRAINSLOPE
STDDEV $STDDEV
prefer $prefer
response $response
outputType_GROUND $OutputSection_GROUND.outputType_GROUND
transmissionMode_GROUND $OutputSection_GROUND.transmissionMode_GROUND
outputType_NONGROUND $OutputSection_NONGROUND.outputType_NONGROUND
transmissionMode_NONGROUND $OutputSection_NONGROUND.transmissionMode_NONGROUND]]></command>
  <inputs>
    <param name="INPUT" type="data" optional="false" label="Grid to filter" help="The grid to filter. The following data types are allowed in the txt file:  tiff, png, x-ogc-envi, x-ogc-aaigrid" format="txt"/>
    <param name="RADIUS" type="integer" value="2" optional="true" label="Search Radius" help="Search radius of kernel in cells."/>
    <param name="TERRAINSLOPE" type="float" value="30" optional="true" label="Approx. Terrain Slope" help="Approximate Terrain Slope [%]"/>
    <param name="STDDEV" type="select" optional="true" label="Use Confidence Interval" help="Use 5 percent confidence interval">
      <option selected="true" value="false">false</option>
      <option value="true">true</option>
    </param>
    <param name="prefer" type="select" label="Choose the Prefer">
      <option selected="true" value="respond-async;return=representation">respond-async;return=representation</option>
      <option value="return=minimal">return=minimal</option>
      <option value="return=representation">return=representation</option>
    </param>
    <param name="response" type="select" label="Response Type" help="Choose 'raw' for raw data or 'document' for document data.">
      <option selected="true" value="document">document</option>
      <option value="raw">raw</option>
    </param>
    <section name="OutputSection_GROUND" title="Select the appropriate transmission mode for the output format" expanded="true">
      <param name="outputType_GROUND" type="select" label="Author did not provide help for this parameter... ">
        <option value="application/x-ogc-aaigrid">x-ogc-aaigrid</option>
        <option value="application/x-ogc-envi">x-ogc-envi</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_GROUND" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
    <section name="OutputSection_NONGROUND" title="Select the appropriate transmission mode for the output format" expanded="true">
      <param name="outputType_NONGROUND" type="select" label="Author did not provide help for this parameter... ">
        <option value="application/x-ogc-aaigrid">x-ogc-aaigrid</option>
        <option value="application/x-ogc-envi">x-ogc-envi</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_NONGROUND" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
  </inputs>
  <outputs>
    <data name="output_data_GROUND" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_GROUND" format="x-ogc-envi" value="application/x-ogc-envi"/>
        <when input="outputType_GROUND" format="x-ogc-aaigrid" value="application/x-ogc-aaigrid"/>
        <when input="outputType_GROUND" format="png" value="image/png"/>
      </change_format>
    </data>
    <data name="output_data_NONGROUND" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_NONGROUND" format="x-ogc-envi" value="application/x-ogc-envi"/>
        <when input="outputType_NONGROUND" format="x-ogc-aaigrid" value="application/x-ogc-aaigrid"/>
        <when input="outputType_NONGROUND" format="png" value="image/png"/>
      </change_format>
    </data>
  </outputs>
  <tests>
    <test>
      <output name="output_data" ftype="txt"/>
      <param name="response" value="document"/>
    </test>
  </tests>
  <help><![CDATA[The tool can be used to filter a digital surface model (DSM), i.e. to classify its cells into bare earth and object cells (ground and nonground cells).&lt;br/&gt;&lt;br/&gt;The tool uses concepts described by VOSSELMAN (2000) and is based on the assumption that a large height difference between two nearby cells is unlikely to be caused by a steep slope in the terrain. The probability that the higher cell could be a ground point decreases if the distance between the two cells decreases. Therefore the filter defines the acceptable height difference between two cells as a function of the distance between the cells. A cell is classified as terrain if there is no other cell within the kernel search radius such that the height difference between these cells is larger than the allowed maximum height difference at the distance between these cells.&lt;br/&gt;&lt;br/&gt;The approximate terrain slope parameter is used to modify the filter function to match the overall slope in the study area. A confidence interval may be used to reject outliers.&lt;br/&gt;&lt;br/&gt;Reference:&lt;br/&gt;VOSSELMAN, G. (2000): Slope based filtering of laser altimetry data. IAPRS, Vol. XXXIII, Part B3, Amsterdam, The Netherlands. pp. 935-942&lt;br/&gt;&lt;br/&gt;]]></help>
  <citations>
    <citation type="bibtex">Josh</citation>
  </citations>
</tool>
