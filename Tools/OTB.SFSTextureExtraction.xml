<tool name="OTB.SFSTextureExtraction" id="otb_sfstextureextraction" version="1.0.0">
  <description>Computes Structural Feature Set textures on every pixel of the input image selected channel</description>
  <requirements>
    <requirement version="3.9" type="package">python</requirement>
  </requirements>
  <version_command><![CDATA[interpreter filename.exe --version]]></version_command>
  <command><![CDATA[$__tool_directory__/Code/openapi.py isArrayin False  output_data_out $output_data_out  name OTB.SFSTextureExtraction in $in
channel $channel
ram $ram
parameters.spethre $parameters.spethre
parameters.spathre $parameters.spathre
parameters.nbdir $parameters.nbdir
parameters.alpha $parameters.alpha
parameters.maxcons $parameters.maxcons
out $out
prefer $prefer
response $response
outputType_out $OutputSection_out.outputType_out
transmissionMode_out $OutputSection_out.transmissionMode_out]]></command>
  <inputs>
    <param name="in" type="data" optional="false" label="The input image to compute the features on." help="The input image to compute the features on. The following data types are allowed in the txt file:  tiff, png, jpeg" format="txt"/>
    <param name="channel" type="integer" value="1" optional="false" label="The selected channel index" help="The selected channel index"/>
    <param name="ram" type="integer" value="128" optional="true" label="Available memory for processing (in MB)" help="Available memory for processing (in MB)"/>
    <param name="parameters.spethre" type="float" value="50" optional="false" label="Spectral Threshold" help="Spectral Threshold"/>
    <param name="parameters.spathre" type="integer" value="100" optional="false" label="Spatial Threshold" help="Spatial Threshold"/>
    <param name="parameters.nbdir" type="integer" value="20" optional="false" label="Number of Direction" help="Number of Direction"/>
    <param name="parameters.alpha" type="float" value="1" optional="false" label="Alpha" help="Alpha"/>
    <param name="parameters.maxcons" type="integer" value="5" optional="false" label="Ratio Maximum Consideration Number" help="Ratio Maximum Consideration Number"/>
    <param name="out" type="select" optional="false" label="Output image containing the SFS texture features." help="Output image containing the SFS texture features.">
      <option value="double">double</option>
      <option selected="true" value="float">float</option>
      <option value="int16">int16</option>
      <option value="int32">int32</option>
      <option value="uint16">uint16</option>
      <option value="uint8">uint8</option>
    </param>
    <param name="prefer" type="select" label="Choose the Prefer">
      <option selected="true" value="respond-async;return=representation">respond-async;return=representation</option>
      <option value="return=minimal">return=minimal</option>
      <option value="return=representation">return=representation</option>
    </param>
    <param name="response" type="select" label="Response Type" help="Choose 'raw' for raw data or 'document' for document data.">
      <option selected="true" value="document">document</option>
      <option value="raw">raw</option>
    </param>
    <section name="OutputSection_out" title="Select the appropriate transmission mode for the output format" expanded="true">
      <param name="outputType_out" type="select" label="Output image containing the SFS texture features." help="Output image containing the SFS texture features.">
        <option value="image/jpeg">jpeg</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_out" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
  </inputs>
  <outputs>
    <data name="output_data_out" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_out" format="jpeg" value="image/jpeg"/>
        <when input="outputType_out" format="png" value="image/png"/>
      </change_format>
    </data>
  </outputs>
  <tests>
    <test>
      <output name="output_data" value="txt"/>
      <param name="response" value="document"/>
    </test>
  </tests>
  <help><![CDATA[Structural Feature Set [1] are based on the histograms of the pixels in multiple directions of the image. The SFSTextureExtraction application computes the  6 following features: SFS'Length, SFS'Width, SFS'PSI, SFS'W-Mean, SFS'Ratio and SFS'SD (Standard Deviation). The texture indices are computed from the neighborhood of each pixel. It is possible to change the length of the calculation line (spatial threshold), as well as the maximum difference between a pixel of the line and the pixel at the center of the neighborhood (spectral threshold) [2].]]></help>
  <citations>
    <citation type="bibtex">Josh</citation>
  </citations>
</tool>
