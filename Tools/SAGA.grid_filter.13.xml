<tool name="SAGA.grid_filter.13" id="saga_grid_filter_13" version="1.0.0">
  <description>Binary Erosion-Reconstruction</description>
  <requirements>
    <requirement version="3.9" type="package">python</requirement>
  </requirements>
  <version_command><![CDATA[interpreter filename.exe --version]]></version_command>
  <command><![CDATA[$__tool_directory__/Code/openapi.py isArrayINPUT_GRID False  output_data_OUTPUT_GRID $output_data_OUTPUT_GRID  name SAGA.grid_filter.13 INPUT_GRID $INPUT_GRID
RADIUS $RADIUS
prefer $prefer
response $response
outputType_OUTPUT_GRID $OutputSection_OUTPUT_GRID.outputType_OUTPUT_GRID
transmissionMode_OUTPUT_GRID $OutputSection_OUTPUT_GRID.transmissionMode_OUTPUT_GRID]]></command>
  <inputs>
    <param name="INPUT_GRID" type="data" optional="false" label="Input Grid" help="Grid to be filtered The following data types are allowed in the txt file:  tiff, x-ogc-aaigrid, x-ogc-envi, png" format="txt"/>
    <param name="RADIUS" type="integer" value="3" optional="true" label="Filter Size (Radius)" help="Filter size (radius in grid cells)"/>
    <param name="prefer" type="select" label="Choose the Prefer">
      <option selected="true" value="respond-async;return=representation">respond-async;return=representation</option>
      <option value="return=minimal">return=minimal</option>
      <option value="return=representation">return=representation</option>
    </param>
    <param name="response" type="select" label="Response Type" help="Choose 'raw' for raw data or 'document' for document data.">
      <option selected="true" value="document">document</option>
      <option value="raw">raw</option>
    </param>
    <section name="OutputSection_OUTPUT_GRID" title="Select the appropriate transmission mode for the output format" expanded="true">
      <param name="outputType_OUTPUT_GRID" type="select" label="Author did not provide help for this parameter... ">
        <option value="application/x-ogc-aaigrid">x-ogc-aaigrid</option>
        <option value="application/x-ogc-envi">x-ogc-envi</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_OUTPUT_GRID" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
  </inputs>
  <outputs>
    <data name="output_data_OUTPUT_GRID" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_OUTPUT_GRID" format="x-ogc-envi" value="application/x-ogc-envi"/>
        <when input="outputType_OUTPUT_GRID" format="x-ogc-aaigrid" value="application/x-ogc-aaigrid"/>
        <when input="outputType_OUTPUT_GRID" format="png" value="image/png"/>
      </change_format>
    </data>
  </outputs>
  <tests>
    <test>
      <output name="output_data" ftype="txt"/>
      <param name="response" value="document"/>
    </test>
  </tests>
  <help><![CDATA[Common binary Opening does not guarantee, that foreground regions which outlast the erosion step are reconstructed to their original shape in the dilation step. Depending on the application, that might be considered as a deficiency. Therefore this tool provides a combination of erosion with the binary Geodesic Morphological Reconstruction, see &lt;br/&gt;L. Vincent (1993): Morphological Grayscale Reconstruction in Image Analysis: Applications and Efficient Algorithms. IEEE Transactions on Image Processing, Vol. 2, No 2&lt;br/&gt;Here we use the algorithm on p. 194: Breadth-first Scanning.&lt;br/&gt;&lt;br/&gt;The marker is defined as the eroded INPUT_GRID, whereas the mask is just the INPUT_GRID itself. OUTPUT_GRID is the reconstruction of the marker under the mask.&lt;br/&gt;]]></help>
  <citations>
    <citation type="bibtex">Josh</citation>
  </citations>
</tool>
