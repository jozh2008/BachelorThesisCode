<tool name="SAGA.sim_erosion.0" id="saga_sim_erosion_0" version="1.0.0">
  <description>MMF-SAGA Soil Erosion Model</description>
  <requirements>
    <requirement version="3.9" type="package">python</requirement>
  </requirements>
  <version_command><![CDATA[interpreter filename.exe --version]]></version_command>
  <command><![CDATA[$__tool_directory__/Code/openapi.py isArrayDTM False  isArrayS False  isArrayCHANNEL False  isArrayPI False  isArrayCC False  isArrayPH False  isArrayEtEo False  isArrayGC False  isArrayD False  isArrayNV False  isArrayMS False  isArrayBD False  isArrayEHD False  isArrayLP False  isArrayPER_C False  isArrayPER_Z False  isArrayPER_S False  isArrayST False  isArrayRFR False  isArrayTAB_METEO False  isArrayOUT_PATH False  output_data_IF $output_data_IF  output_data_Q $output_data_Q  output_data_SL $output_data_SL  output_data_Rf $output_data_Rf  output_data_KE $output_data_KE  output_data_Rc $output_data_Rc  output_data_TCc $output_data_TCc  name SAGA.sim_erosion.0 DTM $DTM
S $S
CHANNEL $CHANNEL
PI $PI
CC $CC
PH $PH
EtEo $EtEo
GC $GC
D $D
NV $NV
MS $MS
BD $BD
EHD $EHD
LP $LP
PER_C $PER_C
PER_Z $PER_Z
PER_S $PER_S
ST $ST
RFR $RFR
TAB_METEO $TAB_METEO
OUT_PATH $OUT_PATH
INTERFLOW $INTERFLOW
T $T
TIMESPAN $TIMESPAN
R $R
I $I
Rn $Rn
KE_I_METHOD $KE_I_METHOD
FLOWD_VA $FLOWD_VA
CHANNELTRANSPORT $CHANNELTRANSPORT
prefer $prefer
response $response
outputType_IF $OutputSection_IF.outputType_IF
transmissionMode_IF $OutputSection_IF.transmissionMode_IF
outputType_Q $OutputSection_Q.outputType_Q
transmissionMode_Q $OutputSection_Q.transmissionMode_Q
outputType_SL $OutputSection_SL.outputType_SL
transmissionMode_SL $OutputSection_SL.transmissionMode_SL
outputType_Rf $OutputSection_Rf.outputType_Rf
transmissionMode_Rf $OutputSection_Rf.transmissionMode_Rf
outputType_KE $OutputSection_KE.outputType_KE
transmissionMode_KE $OutputSection_KE.transmissionMode_KE
outputType_Rc $OutputSection_Rc.outputType_Rc
transmissionMode_Rc $OutputSection_Rc.transmissionMode_Rc
outputType_TCc $OutputSection_TCc.outputType_TCc
transmissionMode_TCc $OutputSection_TCc.transmissionMode_TCc]]></command>
  <inputs>
    <param name="DTM" type="data" optional="false" label="Digital Terrain Model" help="DTM, digital terrain model [m] The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="S" type="data" optional="false" label="Slope" help="S, slope [rad] The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="CHANNEL" type="data" optional="false" label="Channel Network" help="Channel network, all other cells NoData The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="PI" type="data" optional="false" label="Permament Interception" help="PI, permanent interception expressed as the proportion [between 0-1] of rainfall The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="CC" type="data" optional="false" label="Canopy Cover" help="CC, canopy cover expressed as a portion [between 0-1] of the soil surface protected by vegetation or crop The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="PH" type="data" optional="false" label="Plant Height" help="PH, plant height [m], representing the effective height from which raindrops fall from the crop or vegetation The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="EtEo" type="data" optional="false" label="Ratio Evapotranspiration" help="Et/Eo, ratio of actual to potential evapotranspiration The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="GC" type="data" optional="false" label="Ground cover" help="GC, Ground cover expressed as a portion [between 0-1] of the soil surface protected by vegetation or crop cover on the ground The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="D" type="data" optional="false" label="Diameter plant elements" help="D, Average diameter [m] of the individual plants elements (stem, leaves) at the ground surface The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="NV" type="data" optional="false" label="Number plant elements" help="NV, Number of plant elements per unit area [number/unit area] at the ground surface The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="MS" type="data" optional="false" label="Soil moisture (at FC)" help="MS, Soil moisture at field capacity [% w/w] The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="BD" type="data" optional="false" label="Bulk density top layer" help="BD, Bulk density of the top layer [Mg/m3] The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="EHD" type="data" optional="false" label="Effective hydrological depth" help="EHD, Effective hydrological depth of the soil [m] The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="LP" type="data" optional="false" label="Sat. lateral permeability" help="LP, Saturated lateral permeability of the soil [m/day] The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="PER_C" type="data" optional="false" label="Percentage clays" help="c, Percentage clays [%] The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="PER_Z" type="data" optional="false" label="Percentage silt" help="z, Percentage silt [%] The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="PER_S" type="data" optional="false" label="Percentage sand" help="s, Percentage sand [%] The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="ST" type="data" optional="false" label="Percentage rock fragments" help="ST, Percentage rock fragments on the soil surface [%] The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="RFR" type="data" optional="false" label="Surface roughness" help="RFR, Surface roughness [cm/m]. In case the surface roughness is not provided as input, v_flow_t is set to 1.0, i.e. natural soil surface roughness is not accounted for. The following data types are allowed in the txt file:  x-ogc-envi, png, x-ogc-aaigrid, tiff" format="txt"/>
    <param name="TAB_METEO" type="data" optional="false" label="Meteorological data" help="Meteorological data for multiple timestep modelling [model step (day); temperature (Celsius); rainfall (mm), rainfall intensity (mm/h); rainfall duration (day); timespan (days)] The following data types are allowed in the txt file:  csv" format="txt"/>
    <param name="OUT_PATH" type="data" optional="false" label="Output file path" help="Full path to the directory for the output grids of each model step The following data types are allowed in the txt file:  plain" format="txt"/>
    <param name="INTERFLOW" type="select" optional="true" label="Simulate Interflow" help="Simulate interflow">
      <option selected="true" value="false">false</option>
      <option value="true">true</option>
    </param>
    <param name="T" type="float" value="18" optional="true" label="Mean temperature" help="T, mean temperature [degree C]"/>
    <param name="TIMESPAN" type="integer" value="30" optional="true" label="Timespan (days)" help="The number of days to model."/>
    <param name="R" type="float" value="200" optional="true" label="Rainfall" help="R, height of precipitation in timespan [mm]"/>
    <param name="I" type="float" value="20" optional="true" label="Rainfall intensity" help="I, rainfall intensity [mm/h]"/>
    <param name="Rn" type="float" value="20" optional="true" label="Rainfall Duration" help="Rn, number of rain days in timespan [-]"/>
    <param name="KE_I_METHOD" type="select" optional="true" label="Relationship KE - I" help="Relationship between kinetic energy (KE) and rainfall intensity (I)">
      <option value="Bogor,_West-Java">Bogor, West-Java</option>
      <option value="Eastern_Asia_(Onaga_et_al._1998)">Eastern Asia (Onaga et al. 1998)</option>
      <option value="Mediterranean-type_climates_(Zanchi_&amp;_Torri_1980)">Mediterranean-type climates (Zanchi &amp; Torri 1980)</option>
      <option value="North-western_Europe_(Marshall_&amp;_Palmer)">North-western Europe (Marshall &amp; Palmer)</option>
      <option selected="true" value="North_America_east_of_Rocky_Mountains_(Wischmeier_&amp;_Smith_1978)">North America east of Rocky Mountains (Wischmeier &amp; Smith 1978)</option>
      <option value="Southern_hemisphere_climates_(Rosewell_1986)">Southern hemisphere climates (Rosewell 1986)</option>
      <option value="Tropical_climates_(Hudson_1965)">Tropical climates (Hudson 1965)</option>
      <option value="Western_Mediterranean_(Coutinho_&amp;_Tomas_1995)">Western Mediterranean (Coutinho &amp; Tomas 1995)</option>
    </param>
    <param name="FLOWD_VA" type="float" value="0.005" optional="true" label="Flow Depth (actual flow velocity)" help="The flow depth used to calculate the actual flow velocity [m] (e.g. 0.005 unchannelled flow, 0.01 shallow rills, 0.25 deeper rills."/>
    <param name="CHANNELTRANSPORT" type="select" optional="true" label="Route Soil along Channel Network" help="Route soil loss along channel network to outlet">
      <option selected="true" value="false">false</option>
      <option value="true">true</option>
    </param>
    <param name="prefer" type="select" label="Choose the Prefer">
      <option selected="true" value="respond-async;return=representation">respond-async;return=representation</option>
      <option value="return=minimal">return=minimal</option>
      <option value="return=representation">return=representation</option>
    </param>
    <param name="response" type="select" label="Response Type" help="Choose 'raw' for raw data or 'document' for document data.">
      <option selected="true" value="document">document</option>
      <option value="raw">raw</option>
    </param>
    <section name="OutputSection_IF" title="Select the appropriate transmission mode for the output format" expanded="true">
      <param name="outputType_IF" type="select" label="Interflow" help="IF">
        <option value="application/x-ogc-aaigrid">x-ogc-aaigrid</option>
        <option value="application/x-ogc-envi">x-ogc-envi</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_IF" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
    <section name="OutputSection_Q" title="Select the appropriate transmission mode for the output format" expanded="true">
      <param name="outputType_Q" type="select" label="Mean runoff" help="Q, estimation of mean runoff [mm]">
        <option value="application/x-ogc-aaigrid">x-ogc-aaigrid</option>
        <option value="application/x-ogc-envi">x-ogc-envi</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_Q" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
    <section name="OutputSection_SL" title="Select the appropriate transmission mode for the output format" expanded="true">
      <param name="outputType_SL" type="select" label="Mean soil loss" help="SL, estimation of mean soil loss [kg]">
        <option value="application/x-ogc-aaigrid">x-ogc-aaigrid</option>
        <option value="application/x-ogc-envi">x-ogc-envi</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_SL" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
    <section name="OutputSection_Rf" title="Select the appropriate transmission mode for the output format" expanded="true">
      <param name="outputType_Rf" type="select" label="Effective Rainfall" help="Rf">
        <option value="application/x-ogc-aaigrid">x-ogc-aaigrid</option>
        <option value="application/x-ogc-envi">x-ogc-envi</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_Rf" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
    <section name="OutputSection_KE" title="Select the appropriate transmission mode for the output format" expanded="true">
      <param name="outputType_KE" type="select" label="Total Kinetic Energy" help="KE">
        <option value="application/x-ogc-aaigrid">x-ogc-aaigrid</option>
        <option value="application/x-ogc-envi">x-ogc-envi</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_KE" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
    <section name="OutputSection_Rc" title="Select the appropriate transmission mode for the output format" expanded="true">
      <param name="outputType_Rc" type="select" label="Soil moisture storage capacity" help="Rc">
        <option value="application/x-ogc-aaigrid">x-ogc-aaigrid</option>
        <option value="application/x-ogc-envi">x-ogc-envi</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_Rc" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
    <section name="OutputSection_TCc" title="Select the appropriate transmission mode for the output format" expanded="true">
      <param name="outputType_TCc" type="select" label="Transport Capacity Clay" help="TCc">
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_TCc" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
  </inputs>
  <outputs>
    <data name="output_data_IF" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_IF" format="x-ogc-envi" value="application/x-ogc-envi"/>
        <when input="outputType_IF" format="x-ogc-aaigrid" value="application/x-ogc-aaigrid"/>
        <when input="outputType_IF" format="png" value="image/png"/>
      </change_format>
    </data>
    <data name="output_data_Q" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_Q" format="x-ogc-envi" value="application/x-ogc-envi"/>
        <when input="outputType_Q" format="x-ogc-aaigrid" value="application/x-ogc-aaigrid"/>
        <when input="outputType_Q" format="png" value="image/png"/>
      </change_format>
    </data>
    <data name="output_data_SL" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_SL" format="x-ogc-envi" value="application/x-ogc-envi"/>
        <when input="outputType_SL" format="x-ogc-aaigrid" value="application/x-ogc-aaigrid"/>
        <when input="outputType_SL" format="png" value="image/png"/>
      </change_format>
    </data>
    <data name="output_data_Rf" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_Rf" format="x-ogc-envi" value="application/x-ogc-envi"/>
        <when input="outputType_Rf" format="x-ogc-aaigrid" value="application/x-ogc-aaigrid"/>
        <when input="outputType_Rf" format="png" value="image/png"/>
      </change_format>
    </data>
    <data name="output_data_KE" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_KE" format="x-ogc-envi" value="application/x-ogc-envi"/>
        <when input="outputType_KE" format="x-ogc-aaigrid" value="application/x-ogc-aaigrid"/>
        <when input="outputType_KE" format="png" value="image/png"/>
      </change_format>
    </data>
    <data name="output_data_Rc" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_Rc" format="x-ogc-envi" value="application/x-ogc-envi"/>
        <when input="outputType_Rc" format="x-ogc-aaigrid" value="application/x-ogc-aaigrid"/>
        <when input="outputType_Rc" format="png" value="image/png"/>
      </change_format>
    </data>
    <data name="output_data_TCc" format="tiff" hidden="false"/>
  </outputs>
  <tests>
    <test>
      <output name="output_data" value="txt"/>
      <param name="response" value="document"/>
    </test>
  </tests>
  <help><![CDATA[Soil erosion modelling with a modified MMF (Morgan-Morgan-Finney) model (Morgan & Duzant 2008).&lt;br/&gt;This tool is called MMF-SAGA because some things have been implemented differently compared to the original publication. The most important are:&lt;br/&gt;&lt;br/&gt;&lt;ul&gt;&lt;li&gt;the extension of the model to support spatially distributed modelling&lt;/li&gt;&lt;li&gt;the introduction of a "Channel Network" layer&lt;/li&gt;&lt;li&gt;the introduction of a "rainfall duration" (time span) parameter&lt;/li&gt;&lt;li&gt;the exposure of the flow depth parameter&lt;/li&gt;&lt;/ul&gt;&lt;br/&gt;&lt;br/&gt;A more detailed description of the model, its modifications, and model application is provided by Setiawan (2012), chapter 6.&lt;br/&gt;Currently, a number of additional grid datasets are outputted to facilitate model evaluation. This can be easily changed within the source code.&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;References:&lt;br/&gt;&lt;b&gt;Morgan, R.P.C. (2001)&lt;/b&gt;: A simple approach to soil loss prediction: a revised Morgan-Morgan-Finney model. Catena 44: 305-322.&lt;br/&gt;&lt;br/&gt;&lt;b&gt;Morgan, R.P.C., Duzant, J.H. (2008)&lt;/b&gt;: Modified MMF (Morgan-Morgan-Finney) model for evaluating effects of crops and vegetation cover on soil erosion. Earth Surf. Process. Landforms 32: 90-106.&lt;br/&gt;&lt;br/&gt;&lt;a href="http://sourceforge.net/projects/saga-gis/files/SAGA%20-%20Documentation/Modules/MMF-SAGA_Setiawan.pdf"&gt;&lt;b&gt;Setiawan, M. A. (2012)&lt;/b&gt;: Integrated Soil Erosion Management in the upper Serayu Watershed, Wonosobo District, Central Java Province, Indonesia. Dissertation at the Faculty of Geo- and Atmospheric Sciences of the University of Innsbruck, Austria.&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;]]></help>
  <citations>
    <citation type="bibtex">Josh</citation>
  </citations>
</tool>
