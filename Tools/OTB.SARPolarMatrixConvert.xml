<tool name="OTB.SARPolarMatrixConvert" id="otb_sarpolarmatrixconvert" version="1.0.0">
  <description>This applications allows converting classical polarimetric matrices to each other.</description>
  <requirements>
    <requirement version="3.9" type="package">python</requirement>
  </requirements>
  <version_command><![CDATA[interpreter filename.exe --version]]></version_command>
  <command><![CDATA[$__tool_directory__/Code/openapi.py isArrayinc False  isArrayinf False  isArrayinhh False  isArrayinhv False  isArrayinvh False  isArrayinvv False  output_data_outc $output_data_outc  output_data_outf $output_data_outf  name OTB.SARPolarMatrixConvert inc $inc
inf $inf
inhh $inhh
inhv $inhv
invh $invh
invv $invv
outc $outc
outf $outf
conv $conv
ram $ram
prefer $prefer
response $response
outputType_outc $OutputSection_outc.outputType_outc
transmissionMode_outc $OutputSection_outc.transmissionMode_outc
outputType_outf $OutputSection_outf.outputType_outf
transmissionMode_outf $OutputSection_outf.transmissionMode_outf]]></command>
  <inputs>
    <param name="inc" type="data" optional="false" label="Input : multi-band complex image" help="Input : multi-band complex image The following data types are allowed in the txt file:  png, jpeg, tiff" format="txt"/>
    <param name="inf" type="data" optional="false" label="Input : multi-band real image" help="Input : multi-band real image The following data types are allowed in the txt file:  png, jpeg, tiff" format="txt"/>
    <param name="inhh" type="data" optional="false" label="Input : one-band complex image (HH)" help="Input : one-band complex image (HH) The following data types are allowed in the txt file:  png, jpeg, tiff" format="txt"/>
    <param name="inhv" type="data" optional="false" label="Input : one-band complex image (HV)" help="Input : one-band complex image (HV) The following data types are allowed in the txt file:  png, jpeg, tiff" format="txt"/>
    <param name="invh" type="data" optional="false" label="Input : one-band complex image (VH)" help="Input : one-band complex image (VH) The following data types are allowed in the txt file:  png, jpeg, tiff" format="txt"/>
    <param name="invv" type="data" optional="false" label="Input : one-band complex image (VV)" help="Input : one-band complex image (VV) The following data types are allowed in the txt file:  png, jpeg, tiff" format="txt"/>
    <param name="outc" type="select" optional="true" label="Output Complex image." help="Output Complex image.">
      <option value="double">double</option>
      <option selected="true" value="float">float</option>
      <option value="int16">int16</option>
      <option value="int32">int32</option>
      <option value="uint16">uint16</option>
      <option value="uint8">uint8</option>
    </param>
    <param name="outf" type="select" optional="true" label="Output Real image." help="Output Real image.">
      <option value="double">double</option>
      <option selected="true" value="float">float</option>
      <option value="int16">int16</option>
      <option value="int32">int32</option>
      <option value="uint16">uint16</option>
      <option value="uint8">uint8</option>
    </param>
    <param name="conv" type="select" optional="false" label="conv" help="conv">
      <option value="bsinclairtocircovariance">bsinclairtocircovariance</option>
      <option value="bsinclairtocoherency">bsinclairtocoherency</option>
      <option value="bsinclairtocovariance">bsinclairtocovariance</option>
      <option value="mcoherencytomueller">mcoherencytomueller</option>
      <option value="mcovariancetocoherency">mcovariancetocoherency</option>
      <option value="mcovariancetocoherencydegree">mcovariancetocoherencydegree</option>
      <option value="mlinearcovariancetocircularcovariance">mlinearcovariancetocircularcovariance</option>
      <option value="msinclairtocircovariance">msinclairtocircovariance</option>
      <option selected="true" value="msinclairtocoherency">msinclairtocoherency</option>
      <option value="msinclairtocovariance">msinclairtocovariance</option>
      <option value="muellertomcovariance">muellertomcovariance</option>
      <option value="muellertopoldegandpower">muellertopoldegandpower</option>
      <option value="sinclairtomueller">sinclairtomueller</option>
    </param>
    <param name="ram" type="integer" value="128" optional="true" label="Available memory for processing (in MB)" help="Available memory for processing (in MB)"/>
    <param name="prefer" type="select" label="Choose the Prefer">
      <option selected="true" value="respond-async;return=representation">respond-async;return=representation</option>
      <option value="return=minimal">return=minimal</option>
      <option value="return=representation">return=representation</option>
    </param>
    <param name="response" type="select" label="Response Type" help="Choose 'raw' for raw data or 'document' for document data.">
      <option selected="true" value="document">document</option>
      <option value="raw">raw</option>
    </param>
    <section name="OutputSection_outc" title="Select the appropriate transmission mode for the output format and the output value" expanded="true">
      <param name="outputType_outc" type="select" label="Output Complex image." help="Output Complex image.">
        <option value="image/jpeg">jpeg</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_outc" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
    <section name="OutputSection_outf" title="Select the appropriate transmission mode for the output format and the output value" expanded="true">
      <param name="outputType_outf" type="select" label="Output Real image." help="Output Real image.">
        <option value="image/jpeg">jpeg</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_outf" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
  </inputs>
  <outputs>
    <data name="output_data_outc" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_outc" format="jpeg" value="image/jpeg"/>
        <when input="outputType_outc" format="png" value="image/png"/>
      </change_format>
    </data>
    <data name="output_data_outf" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_outf" format="jpeg" value="image/jpeg"/>
        <when input="outputType_outf" format="png" value="image/png"/>
      </change_format>
    </data>
  </outputs>
  <tests>
    <test>
      <output name="output_data" value="txt"/>
      <param name="response" value="document"/>
    </test>
  </tests>
  <help><![CDATA[This application allows converting classical polarimetric matrices to each other.For instance, it is possible to get the coherency matrix from the Sinclar one, or the Mueller matrix from the coherency one.The filters used in this application never handle matrices, but images where each band is related to their elements.As most of the time SAR polarimetry handles symmetric/hermitian matrices, only the relevant elements are stored, so that the images representing them have a minimal number of bands.For instance, the coherency matrix size is 3x3 in the monostatic case, and 4x4 in the bistatic case : it will thus be stored in a 6-band or a 10-band complex image (the diagonal and the upper elements of the matrix).The Sinclair matrix is a special case : it is always represented as 3 or 4 one-band complex images (for mono- or bistatic case).The available conversions are listed below:--- Monostatic case ---1 msinclairtocoherency --> Sinclair matrix to coherency matrix (input : 3 x 1 complex channel (HH, HV or VH, VV) | output :  6 complex channels)2 msinclairtocovariance --> Sinclair matrix to covariance matrix (input : 3 x 1 complex channel (HH, HV or VH, VV) | output :  6 complex channels)3 msinclairtocircovariance --> Sinclair matrix to circular covariance matrix (input : 3 x 1 complex channel (HH, HV or VH, VV) | output :  6 complex channels)4 mcoherencytomueller --> Coherency matrix to Mueller matrix (input : 6 complex channels | 16 real channels)5 mcovariancetocoherencydegree --> Covariance matrix to coherency degree (input : 6 complex channels | 3 complex channels)6 mcovariancetocoherency --> Covariance matrix to coherency matrix (input : 6 complex channels | 6 complex channels)7 mlinearcovariancetocircularcovariance --> Covariance matrix to circular covariance matrix (input : 6 complex channels | output : 6 complex channels)--- Bistatic case ---8 bsinclairtocoherency --> Sinclair matrix to coherency matrix (input : 4 x 1 complex channel (HH, HV, VH, VV) | 10 complex channels)9 bsinclairtocovariance --> Sinclair matrix to covariance matrix (input : 4 x 1 complex channel (HH, HV, VH, VV) | output : 10 complex channels)10 bsinclairtocircovariance --> Sinclair matrix to circular covariance matrix (input : 4 x 1 complex channel (HH, HV, VH, VV) | output : 10 complex channels)--- Both cases ---11 sinclairtomueller --> Sinclair matrix to Mueller matrix (input : 4 x 1 complex channel (HH, HV, VH, VV) | output : 16 real channels)12 muellertomcovariance --> Mueller matrix to covariance matrix (input : 16 real channels | output : 6 complex channels)13 muellertopoldegandpower --> Mueller matrix to polarization degree and power (input : 16 real channels | output : 4 real channels)]]></help>
  <citations>
    <citation type="bibtex">Josh</citation>
  </citations>
</tool>
