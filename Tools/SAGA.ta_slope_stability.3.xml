<tool name="SAGA.ta_slope_stability.3" id="saga_ta_slope_stability_3" version="1.0.0">
  <description>WETNESS</description>
  <requirements>
    <requirement version="3.9" type="package">python</requirement>
  </requirements>
  <version_command><![CDATA[interpreter filename.exe --version]]></version_command>
  <command><![CDATA[$__tool_directory__/Code/openapi.py isArrayDEM False  isArrayCmin False  isArrayCmax False  isArrayDmin False  isArrayDmax False  isArrayEmin False  isArrayEmax False  output_data_F $output_data_F  output_data_G $output_data_G  name SAGA.ta_slope_stability.3 DEM $DEM
Cmin $Cmin
Cmax $Cmax
Dmin $Dmin
Dmax $Dmax
Emin $Emin
Emax $Emax
fCmin $fCmin
fCmax $fCmax
fDmin $fDmin
fDmax $fDmax
fEmin $fEmin
fEmax $fEmax
fH $fH
METHOD $METHOD
PREPROC $PREPROC
prefer $prefer
response $response
outputType_F $OutputSection_F.outputType_F
transmissionMode_F $OutputSection_F.transmissionMode_F
outputType_G $OutputSection_G.outputType_G
transmissionMode_G $OutputSection_G.transmissionMode_G]]></command>
  <inputs>
    <param name="DEM" type="data" optional="false" label="DEM" help="A DEM The following data types are allowed in the txt file:  tiff, x-ogc-aaigrid, png, x-ogc-envi" format="txt"/>
    <param name="Cmin" type="data" optional="false" label="Min hydraulic conductivity grid (m/hr) " help="A grid representing minimum material hydraulic conductivity (in m/hr) The following data types are allowed in the txt file:  tiff, x-ogc-aaigrid, png, x-ogc-envi" format="txt"/>
    <param name="Cmax" type="data" optional="false" label="Max hydraulic conductivity grid (m/hr) " help="A grid representing maximum material hydraulic conductivity (in m/hr) The following data types are allowed in the txt file:  tiff, x-ogc-aaigrid, png, x-ogc-envi" format="txt"/>
    <param name="Dmin" type="data" optional="false" label="Min groundwater recharge grid (m/hr) " help="A grid representing minimum groundwater recharge (in m/hr) The following data types are allowed in the txt file:  tiff, x-ogc-aaigrid, png, x-ogc-envi" format="txt"/>
    <param name="Dmax" type="data" optional="false" label="Max groundwater recharge grid (m/hr) " help="A grid representing maximum groundwater recharge (in m/hr) The following data types are allowed in the txt file:  tiff, x-ogc-aaigrid, png, x-ogc-envi" format="txt"/>
    <param name="Emin" type="data" optional="false" label="Min material depth grid (m)" help="A grid representing minimum depth to potential shear plane (in m) The following data types are allowed in the txt file:  tiff, x-ogc-aaigrid, png, x-ogc-envi" format="txt"/>
    <param name="Emax" type="data" optional="false" label="Max material depth grid (m)" help="A grid representing maximum depth to potential shear plane (in m) The following data types are allowed in the txt file:  tiff, x-ogc-aaigrid, png, x-ogc-envi" format="txt"/>
    <param name="fCmin" type="float" value="2.7" optional="true" label="Min global material conductivity (m/hr)" help="Constant value if no raster set"/>
    <param name="fCmax" type="float" value="2.7" optional="true" label="Max global material conductivity (m/hr)" help="Constant value if no raster set"/>
    <param name="fDmin" type="float" value="0.001" optional="true" label="Min global groundwater recharge (m/hr)" help="Constant value if no raster set"/>
    <param name="fDmax" type="float" value="0.001" optional="true" label="Max global groundwater recharge (m/hr)" help="Constant value if no raster set"/>
    <param name="fEmin" type="float" value="1" optional="true" label="Min global material depth (m)" help="Constant value if no raster set"/>
    <param name="fEmax" type="float" value="1" optional="true" label="Max global material depth (m)" help="Constant value if no raster set"/>
    <param name="fH" type="integer" value="1" optional="true" label="Parameter sampling runs" help="Number of sampling cycles"/>
    <param name="METHOD" type="select" optional="true" label="Catchment Area Calculation" help="Catchment Area Calculation">
      <option value="Braunschweiger_Reliefmodell">Braunschweiger Reliefmodell</option>
      <option value="Deterministic_8">Deterministic 8</option>
      <option value="Deterministic_Infinity">Deterministic Infinity</option>
      <option selected="true" value="Multiple_Flow_Direction">Multiple Flow Direction</option>
      <option value="Multiple_Triangular_Flow_Directon">Multiple Triangular Flow Directon</option>
      <option value="Rho_8">Rho 8</option>
    </param>
    <param name="PREPROC" type="select" optional="true" label="Preprocessing" help="Preprocessing">
      <option selected="true" value="false">false</option>
      <option value="true">true</option>
    </param>
    <param name="prefer" type="select" label="Choose the Prefer">
      <option selected="true" value="respond-async;return=representation">respond-async;return=representation</option>
      <option value="return=minimal">return=minimal</option>
      <option value="return=representation">return=representation</option>
    </param>
    <param name="response" type="select" label="Response Type" help="Choose 'raw' for raw data or 'document' for document data.">
      <option selected="true" value="document">document</option>
      <option value="raw">raw</option>
    </param>
    <section name="OutputSection_F" title="Select the appropriate transmission mode for the output format" expanded="true">
      <param name="outputType_F" type="select" label="WI values" help="Resulting wetness index (-) grid">
        <option value="application/x-ogc-aaigrid">x-ogc-aaigrid</option>
        <option value="application/x-ogc-envi">x-ogc-envi</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_F" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
    <section name="OutputSection_G" title="Select the appropriate transmission mode for the output format" expanded="true">
      <param name="outputType_G" type="select" label="WI classes" help="Classified wetness (-) grid">
        <option value="application/x-ogc-aaigrid">x-ogc-aaigrid</option>
        <option value="application/x-ogc-envi">x-ogc-envi</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_G" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
  </inputs>
  <outputs>
    <data name="output_data_F" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_F" format="x-ogc-envi" value="application/x-ogc-envi"/>
        <when input="outputType_F" format="x-ogc-aaigrid" value="application/x-ogc-aaigrid"/>
        <when input="outputType_F" format="png" value="image/png"/>
      </change_format>
    </data>
    <data name="output_data_G" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_G" format="x-ogc-envi" value="application/x-ogc-envi"/>
        <when input="outputType_G" format="x-ogc-aaigrid" value="application/x-ogc-aaigrid"/>
        <when input="outputType_G" format="png" value="image/png"/>
      </change_format>
    </data>
  </outputs>
  <tests>
    <test>
      <output name="output_data" value="txt"/>
      <param name="response" value="document"/>
    </test>
  </tests>
  <help><![CDATA[&lt;br/&gt;This tool calculates a topographic wetness index (TWI) following Montgomery & Dietrich (1994) that can be used to estimate the degree of saturation of unconsolidated, permeable materials above (more or less) impermeable bedrock. In contrast to the common TOPMODEL (Beven & Kirkby, 1979) - based TWI, this index differs in such that it considers hydraulic conductivity to be constant in a soil mantle overlying relatively impermeable bedrock. Also, it uses the sine of the slope rather than its tangens, which is more correct and significantly matters for steeper slopes that give raise to landslides. For computation, a slope (in radians) and a catchment area (in m2) grid are required. Additionally, information on groundwater recharge (m/hr), material hydraulic conductivity (m/hr), and depth to potential shear plane (m) are required that can be specified either globally or through grids. The tool produces a continuous wetness index (-) where cells with WI values &gt; 1 (overland flow) set to 1, and optionally creates a classified WI grid rendering three saturation classes:.&lt;br/&gt;0): Low moisture (WI smaller 0.1)&lt;br/&gt;1): Partially wet (0.1 smaller WI smaller 1)&lt;br/&gt;2): Saturation zone (WI larger 1)&lt;br/&gt;&lt;br/&gt;References:&lt;br/&gt;&lt;a href="http://www.tandfonline.com/doi/abs/10.1080/02626667909491834"&gt;Beven, K.J., Kirkby, M.J. (1979) A physically-based variable contributing area model of basin hydrology. Hydrology Science Bulletin, 24, 43-69.&lt;/a&gt;.&lt;br/&gt;&lt;br/&gt;&lt;a href="http://www.agu.org/pubs/crossref/1994/93WR02979.shtml"&gt;Montgomery D. R., Dietrich, W. E. (1994) A physically based model for the topographic control on shallow landsliding. Water Resources Research, 30, 1153-1171.&lt;/a&gt;.&lt;br/&gt;]]></help>
  <citations>
    <citation type="bibtex">Josh</citation>
  </citations>
</tool>
