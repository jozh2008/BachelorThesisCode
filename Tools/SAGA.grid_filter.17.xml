<tool name="SAGA.grid_filter.17" id="saga_grid_filter_17" version="1.0.0">
  <description>Wombling for Multiple Features (Edge Detection)</description>
  <requirements>
    <requirement version="3.9" type="package">python</requirement>
  </requirements>
  <version_command><![CDATA[interpreter filename.exe --version]]></version_command>
  <command><![CDATA[$__tool_directory__/Code/openapi.py isArrayFEATURES True  output_data_EDGE_CELLS $output_data_EDGE_CELLS  output_data_OUTPUT $output_data_OUTPUT  name SAGA.grid_filter.17 TMAGNITUDE $TMAGNITUDE
TDIRECTION $TDIRECTION
TNEIGHBOUR $TNEIGHBOUR
ALIGNMENT $ALIGNMENT
NEIGHBOUR $NEIGHBOUR
FEATURES $FEATURES
OUTPUT_ADD $OUTPUT_ADD
ZERO_AS_NODATA $ZERO_AS_NODATA
prefer $prefer
response $response
outputType_EDGE_CELLS $OutputSection_EDGE_CELLS.outputType_EDGE_CELLS
transmissionMode_EDGE_CELLS $OutputSection_EDGE_CELLS.transmissionMode_EDGE_CELLS
outputType_OUTPUT $OutputSection_OUTPUT.outputType_OUTPUT
transmissionMode_OUTPUT $OutputSection_OUTPUT.transmissionMode_OUTPUT]]></command>
  <inputs>
    <param name="TMAGNITUDE" type="float" value="90" optional="true" label="Minimum Magnitude" help="Minimum magnitude as percentile."/>
    <param name="TDIRECTION" type="float" value="30" optional="true" label="Maximum Angle" help="Maximum angular difference as degree between adjacent segment points."/>
    <param name="TNEIGHBOUR" type="integer" value="1" optional="true" label="Minimum Neighbours" help="Minimum number of neighbouring potential edge cells with similar direction."/>
    <param name="ALIGNMENT" type="select" optional="true" label="Alignment" help="Alignment">
      <option value="between_cells">between cells</option>
      <option selected="true" value="on_cell">on cell</option>
    </param>
    <param name="NEIGHBOUR" type="select" optional="true" label="Edge Connectivity" help="Edge Connectivity">
      <option selected="true" value="Queen's_case">Queen's case</option>
      <option value="Rooke's_case">Rooke's case</option>
    </param>
    <param name="FEATURES" type="data" optional="false" label="Features" help="Features The following data types are allowed in the txt file:  tiff, png, x-ogc-envi, x-ogc-aaigrid" format="txt"/>
    <param name="OUTPUT_ADD" type="select" optional="true" label="Additional Output" help="Additional Output">
      <option value="edge_cells">edge cells</option>
      <option value="gradients">gradients</option>
      <option selected="true" value="none">none</option>
    </param>
    <param name="ZERO_AS_NODATA" type="select" optional="true" label="Zero as No-Data" help="Zero as No-Data">
      <option selected="true" value="false">false</option>
      <option value="true">true</option>
    </param>
    <param name="prefer" type="select" label="Choose the Prefer">
      <option selected="true" value="respond-async;return=representation">respond-async;return=representation</option>
      <option value="return=minimal">return=minimal</option>
      <option value="return=representation">return=representation</option>
    </param>
    <param name="response" type="select" label="Response Type" help="Choose 'raw' for raw data or 'document' for document data.">
      <option selected="true" value="document">document</option>
      <option value="raw">raw</option>
    </param>
    <section name="OutputSection_EDGE_CELLS" title="Select the appropriate transmission mode for the output format and the output value" expanded="true">
      <param name="outputType_EDGE_CELLS" type="select" label="Edges" help="Edges">
        <option value="application/x-ogc-aaigrid">x-ogc-aaigrid</option>
        <option value="application/x-ogc-envi">x-ogc-envi</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_EDGE_CELLS" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
    <section name="OutputSection_OUTPUT" title="Select the appropriate transmission mode for the output format and the output value" expanded="true">
      <param name="outputType_OUTPUT" type="select" label="Output" help="Output">
        <option value="application/x-ogc-aaigrid">x-ogc-aaigrid</option>
        <option value="application/x-ogc-envi">x-ogc-envi</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_OUTPUT" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
  </inputs>
  <outputs>
    <data name="output_data_EDGE_CELLS" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_EDGE_CELLS" format="x-ogc-envi" value="application/x-ogc-envi"/>
        <when input="outputType_EDGE_CELLS" format="x-ogc-aaigrid" value="application/x-ogc-aaigrid"/>
        <when input="outputType_EDGE_CELLS" format="png" value="image/png"/>
      </change_format>
    </data>
    <data name="output_data_OUTPUT" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_OUTPUT" format="x-ogc-envi" value="application/x-ogc-envi"/>
        <when input="outputType_OUTPUT" format="x-ogc-aaigrid" value="application/x-ogc-aaigrid"/>
        <when input="outputType_OUTPUT" format="png" value="image/png"/>
      </change_format>
    </data>
  </outputs>
  <tests>
    <test>
      <output name="output_data" value="txt"/>
      <param name="response" value="document"/>
    </test>
  </tests>
  <help><![CDATA[Continuous Wombling for edge detection. Uses magnitude of gradient to detect edges between adjacent cells. Edge segments connect such edges, when the difference of their gradient directions is below given threshold.]]></help>
  <citations>
    <citation type="bibtex">Josh</citation>
  </citations>
</tool>
