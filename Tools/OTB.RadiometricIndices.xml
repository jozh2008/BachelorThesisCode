<tool name="OTB.RadiometricIndices" id="otb_radiometricindices" version="1.0.0">
  <description>Compute radiometric indices.</description>
  <requirements>
    <requirement version="3.9" type="package">python</requirement>
  </requirements>
  <version_command><![CDATA[interpreter filename.exe --version]]></version_command>
  <command><![CDATA[$__tool_directory__/Code/openapi.py isArrayin False  output_data_out $output_data_out  name OTB.RadiometricIndices in $in
out $out
ram $ram
channels.blue $channels.blue
channels.green $channels.green
channels.red $channels.red
channels.nir $channels.nir
channels.mir $channels.mir
list $list
prefer $prefer
response $response
outputType_out $OutputSection_out.outputType_out
transmissionMode_out $OutputSection_out.transmissionMode_out]]></command>
  <inputs>
    <param name="in" type="data" optional="false" label="Input image" help="Input image The following data types are allowed in the txt file:  png, tiff, jpeg" format="txt"/>
    <param name="out" type="select" optional="false" label="Radiometric indices output image" help="Radiometric indices output image">
      <option value="double">double</option>
      <option selected="true" value="float">float</option>
      <option value="int16">int16</option>
      <option value="int32">int32</option>
      <option value="uint16">uint16</option>
      <option value="uint8">uint8</option>
    </param>
    <param name="ram" type="integer" value="128" optional="true" label="Available memory for processing (in MB)" help="Available memory for processing (in MB)"/>
    <param name="channels.blue" type="integer" value="1" optional="false" label="Blue channel index" help="Blue channel index"/>
    <param name="channels.green" type="integer" value="1" optional="false" label="Green channel index" help="Green channel index"/>
    <param name="channels.red" type="integer" value="1" optional="false" label="Red channel index" help="Red channel index"/>
    <param name="channels.nir" type="integer" value="1" optional="false" label="NIR channel index" help="NIR channel index"/>
    <param name="channels.mir" type="integer" value="1" optional="false" label="Mir channel index" help="Mir channel index"/>
    <param name="list" type="select" optional="false" label="List of available radiometric indices with their relevant channels in brackets:        Vegetation:NDVI - Normalized difference vegetation index (Red, NIR)        Vegetation:TNDVI - Transformed normalized difference vegetation index (Red, NIR)        Vegetation:RVI - Ratio vegetation index (Red, NIR)        Vegetation:SAVI - Soil adjusted vegetation index (Red, NIR)        Vegetation:TSAVI - Transformed soil adjusted vegetation index (Red, NIR)        Vegetation:MSAVI - Modified soil adjusted vegetation index (Red, NIR)        Vegetation:MSAVI2 - Modified soil adjusted vegetation index 2 (Red, NIR)        Vegetation:GEMI - Global environment monitoring index (Red, NIR)        Vegetation:IPVI - Infrared percentage vegetation index (Red, NIR)                Water:NDWI - Normalized difference water index (Gao 1996) (NIR, MIR)        Water:NDWI2 - Normalized difference water index (Mc Feeters 1996) (Green, NIR)        Water:MNDWI - Modified normalized difference water index (Xu 2006) (Green, MIR)        Water:NDPI - Normalized difference pond index (Lacaux et al.) (MIR, Green)        Water:NDTI - Normalized difference turbidity index (Lacaux et al.) (Red, Green)                Soil:RI - Redness index (Red, Green)        Soil:CI - Color index (Red, Green)        Soil:BI - Brightness index (Red, Green)        Soil:BI2 - Brightness index 2 (NIR, Red, Green)" help="List of available radiometric indices with their relevant channels in brackets:        Vegetation:NDVI - Normalized difference vegetation index (Red, NIR)        Vegetation:TNDVI - Transformed normalized difference vegetation index (Red, NIR)        Vegetation:RVI - Ratio vegetation index (Red, NIR)        Vegetation:SAVI - Soil adjusted vegetation index (Red, NIR)        Vegetation:TSAVI - Transformed soil adjusted vegetation index (Red, NIR)        Vegetation:MSAVI - Modified soil adjusted vegetation index (Red, NIR)        Vegetation:MSAVI2 - Modified soil adjusted vegetation index 2 (Red, NIR)        Vegetation:GEMI - Global environment monitoring index (Red, NIR)        Vegetation:IPVI - Infrared percentage vegetation index (Red, NIR)                Water:NDWI - Normalized difference water index (Gao 1996) (NIR, MIR)        Water:NDWI2 - Normalized difference water index (Mc Feeters 1996) (Green, NIR)        Water:MNDWI - Modified normalized difference water index (Xu 2006) (Green, MIR)        Water:NDPI - Normalized difference pond index (Lacaux et al.) (MIR, Green)        Water:NDTI - Normalized difference turbidity index (Lacaux et al.) (Red, Green)                Soil:RI - Redness index (Red, Green)        Soil:CI - Color index (Red, Green)        Soil:BI - Brightness index (Red, Green)        Soil:BI2 - Brightness index 2 (NIR, Red, Green)">
      <option value="bi">bi</option>
      <option value="bi2">bi2</option>
      <option value="ci">ci</option>
      <option value="gemi">gemi</option>
      <option value="ipvi">ipvi</option>
      <option value="laindviformo">laindviformo</option>
      <option value="laindvilog">laindvilog</option>
      <option value="lairefl">lairefl</option>
      <option value="mndwi">mndwi</option>
      <option value="msavi">msavi</option>
      <option value="msavi2">msavi2</option>
      <option value="ndpi">ndpi</option>
      <option value="ndti">ndti</option>
      <option selected="true" value="ndvi">ndvi</option>
      <option value="ndwi">ndwi</option>
      <option value="ndwi2">ndwi2</option>
      <option value="ri">ri</option>
      <option value="rvi">rvi</option>
      <option value="savi">savi</option>
      <option value="tndvi">tndvi</option>
      <option value="tsavi">tsavi</option>
    </param>
    <param name="prefer" type="select" label="Choose the Prefer">
      <option selected="true" value="respond-async;return=representation">respond-async;return=representation</option>
      <option value="return=minimal">return=minimal</option>
      <option value="return=representation">return=representation</option>
    </param>
    <param name="response" type="select" label="Response Type" help="Choose 'raw' for raw data or 'document' for document data.">
      <option selected="true" value="document">document</option>
      <option value="raw">raw</option>
    </param>
    <section name="OutputSection_out" title="Select the appropriate transmission mode for the output format and the output value" expanded="true">
      <param name="outputType_out" type="select" label="Radiometric indices output image" help="Radiometric indices output image">
        <option value="image/jpeg">jpeg</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_out" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
  </inputs>
  <outputs>
    <data name="output_data_out" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_out" format="jpeg" value="image/jpeg"/>
        <when input="outputType_out" format="png" value="image/png"/>
      </change_format>
    </data>
  </outputs>
  <tests>
    <test>
      <output name="output_data" value="txt"/>
      <param name="response" value="document"/>
    </test>
  </tests>
  <help><![CDATA[This application computes radiometric indices using the relevant channels of the input image. The output is a multi band image into which each channel is one of the selected indices.]]></help>
  <citations>
    <citation type="bibtex">Josh</citation>
  </citations>
</tool>
