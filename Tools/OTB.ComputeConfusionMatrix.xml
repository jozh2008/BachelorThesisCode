<tool name="OTB.ComputeConfusionMatrix" id="otb_computeconfusionmatrix" version="1.0.0">
  <description>Computes the confusion matrix of a classification</description>
  <requirements>
    <requirement version="3.9" type="package">python</requirement>
  </requirements>
  <version_command><![CDATA[interpreter filename.exe --version]]></version_command>
  <command><![CDATA[$__tool_directory__/Code/openapi.py isArrayin False  isArrayref.raster.in False  isArrayref.vector.in False  output_data_out $output_data_out  name OTB.ComputeConfusionMatrix in $in
format $format
ref $ref
ref.raster.in $ref.raster.in
ref.raster.nodata $ref.raster.nodata
ref.vector.in $ref.vector.in
ref.vector.field '$ref.vector.field'
ref.vector.nodata $ref.vector.nodata
nodatalabel $nodatalabel
ram $ram
prefer $prefer
response $response
outputType_out $OutputSection_out.outputType_out
transmissionMode_out $OutputSection_out.transmissionMode_out]]></command>
  <inputs>
    <param name="in" type="data" optional="false" label="The input classification image." help="The input classification image. The following data types are allowed in the txt file:  jpeg, png, tiff" format="txt"/>
    <param name="format" type="select" optional="false" label="Choice of the output format as a contingency table for unsupervised algorithmsor confusion matrix for supervised ones." help="Choice of the output format as a contingency table for unsupervised algorithmsor confusion matrix for supervised ones.">
      <option selected="true" value="confusionmatrix">confusionmatrix</option>
      <option value="contingencytable">contingencytable</option>
    </param>
    <param name="ref" type="select" optional="false" label="Choice of ground truth format" help="Choice of ground truth format">
      <option selected="true" value="raster">raster</option>
      <option value="vector">vector</option>
    </param>
    <param name="ref.raster.in" type="data" optional="false" label="Input image containing the ground truth labels" help="Input image containing the ground truth labels The following data types are allowed in the txt file:  jpeg, png, tiff" format="txt"/>
    <param name="ref.raster.nodata" type="integer" value="0" optional="true" label="Label to be treated as no data in ref raster." help="Label to be treated as no data in ref raster."/>
    <param name="ref.vector.in" type="data" optional="false" label="Input vector data of the ground truth" help="Input vector data of the ground truth The following data types are allowed in the txt file:  vnd.google-earth.kml+xml, zip, xml, json" format="txt"/>
    <param name="ref.vector.field" type="text" optional="false" label="Field name containing the label values" help="Field name containing the label values"/>
    <param name="ref.vector.nodata" type="integer" value="0" optional="true" label="Label to be treated as no data in ref vector. Please note that this value is always used in vector mode, to generate default values. Please set it to a value that does not correspond to a class label." help="Label to be treated as no data in ref vector. Please note that this value is always used in vector mode, to generate default values. Please set it to a value that does not correspond to a class label."/>
    <param name="nodatalabel" type="integer" value="0" optional="true" label="Label to be treated as no data in input image" help="Label to be treated as no data in input image"/>
    <param name="ram" type="integer" value="128" optional="true" label="Available memory for processing (in MB)" help="Available memory for processing (in MB)"/>
    <param name="prefer" type="select" label="Choose the Prefer">
      <option selected="true" value="respond-async;return=representation">respond-async;return=representation</option>
      <option value="return=minimal">return=minimal</option>
      <option value="return=representation">return=representation</option>
    </param>
    <param name="response" type="select" label="Response Type" help="Choose 'raw' for raw data or 'document' for document data.">
      <option selected="true" value="document">document</option>
      <option value="raw">raw</option>
    </param>
    <section name="OutputSection_out" title="Select the appropriate transmission mode for the output format" expanded="true">
      <param name="outputType_out" type="select" label="Author did not provide help for this parameter... ">
        <option value="text/csv">csv</option>
      </param>
      <param name="transmissionMode_out" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
  </inputs>
  <outputs>
    <data name="output_data_out" format="csv" hidden="false"/>
  </outputs>
  <tests>
    <test>
      <output name="output_data" value="txt"/>
      <param name="response" value="document"/>
    </test>
  </tests>
  <help><![CDATA[This application computes the confusion matrix of a classification map relative to a ground truth dataset. This ground truth can be given as a raster or a vector data. Only reference and produced pixels with values different from NoData are handled in the calculation of the confusion matrix. The confusion matrix is organized the following way: rows = reference labels, columns = produced labels. In the header of the output file, the reference and produced class labels are ordered according to the rows/columns of the confusion matrix.]]></help>
  <citations>
    <citation type="bibtex">Josh</citation>
  </citations>
</tool>
