<tool name="OTB.Rasterization" id="otb_rasterization" version="1.0.0">
  <description>Rasterize a vector dataset.</description>
  <requirements>
    <requirement version="3.9" type="package">python</requirement>
  </requirements>
  <version_command><![CDATA[interpreter filename.exe --version]]></version_command>
  <command><![CDATA[$__tool_directory__/Code/openapi.py isArrayin False  isArrayim False  output_data_out $output_data_out  name OTB.Rasterization in $in
out $out
im $im
szx $szx
szy $szy
epsg $epsg
orx $orx
ory $ory
spx $spx
spy $spy
background $background
mode $mode
mode_binary_foreground $mode_binary_foreground
mode_attribute_field '$mode_attribute_field'
ram $ram
prefer $prefer
response $response
outputType_out $OutputSection_out.outputType_out
transmissionMode_out $OutputSection_out.transmissionMode_out]]></command>
  <inputs>
    <param name="in" type="data" optional="false" label="The input vector dataset to be rasterized" help="The input vector dataset to be rasterized The following data types are allowed in the txt file:  zip, xml, json, vnd.google-earth.kml+xml" format="txt"/>
    <param name="out" type="select" optional="false" label="An output image containing the rasterized vector dataset" help="An output image containing the rasterized vector dataset">
      <option value="double">double</option>
      <option selected="true" value="float">float</option>
      <option value="int16">int16</option>
      <option value="int32">int32</option>
      <option value="uint16">uint16</option>
      <option value="uint8">uint8</option>
    </param>
    <param name="im" type="data" optional="false" label="A reference image from which to import output grid and projection reference system information." help="A reference image from which to import output grid and projection reference system information. The following data types are allowed in the txt file:  tiff, png, jpeg" format="txt"/>
    <param name="szx" type="integer" optional="true" label="Output size along x axis (useless if support image is given)" help="Output size along x axis (useless if support image is given)"/>
    <param name="szy" type="integer" optional="true" label="Output size along y axis (useless if support image is given)" help="Output size along y axis (useless if support image is given)"/>
    <param name="epsg" type="integer" optional="true" label="EPSG code for the output projection reference system (EPSG 4326 for WGS84, 32631 for UTM31N...,useless if support image is given)" help="EPSG code for the output projection reference system (EPSG 4326 for WGS84, 32631 for UTM31N...,useless if support image is given)"/>
    <param name="orx" type="float" optional="true" label="Output upper-left corner x coordinate (useless if support image is given)" help="Output upper-left corner x coordinate (useless if support image is given)"/>
    <param name="ory" type="float" optional="true" label="Output upper-left corner y coordinate (useless if support image is given)" help="Output upper-left corner y coordinate (useless if support image is given)"/>
    <param name="spx" type="float" optional="true" label="Spacing (ground sampling distance) along x axis (useless if support image is given)" help="Spacing (ground sampling distance) along x axis (useless if support image is given)"/>
    <param name="spy" type="float" optional="true" label="Spacing (ground sampling distance) along y axis (useless if support image is given)" help="Spacing (ground sampling distance) along y axis (useless if support image is given)"/>
    <param name="background" type="float" value="0" optional="false" label="Default value for pixels not belonging to any geometry" help="Default value for pixels not belonging to any geometry"/>
    <param name="mode" type="select" optional="false" label="Choice of rasterization modes" help="Choice of rasterization modes">
      <option value="attribute">attribute</option>
      <option selected="true" value="binary">binary</option>
    </param>
    <param name="mode_binary_foreground" type="float" value="255" optional="false" label="Value for pixels inside a geometry" help="Value for pixels inside a geometry"/>
    <param name="mode_attribute_field" type="text" value="DN" optional="false" label="Name of the attribute field to burn" help="Name of the attribute field to burn"/>
    <param name="ram" type="integer" value="128" optional="true" label="Available memory for processing (in MB)" help="Available memory for processing (in MB)"/>
    <param name="prefer" type="select" label="Choose the Prefer">
      <option selected="true" value="respond-async;return=representation">respond-async;return=representation</option>
      <option value="return=minimal">return=minimal</option>
      <option value="return=representation">return=representation</option>
    </param>
    <param name="response" type="select" label="Response Type" help="Choose 'raw' for raw data or 'document' for document data.">
      <option selected="true" value="document">document</option>
      <option value="raw">raw</option>
    </param>
    <section name="OutputSection_out" title="Select the appropriate transmission mode for the output format" expanded="true">
      <param name="outputType_out" type="select" label="Author did not provide help for this parameter... ">
        <option value="image/jpeg">jpeg</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_out" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
  </inputs>
  <outputs>
    <data name="output_data_out" format="tiff" label="output_data_out" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_out" format="jpeg" value="image/jpeg"/>
        <when input="outputType_out" format="png" value="image/png"/>
      </change_format>
    </data>
  </outputs>
  <tests>
    <test>
      <param name="response" value="document"/>
      <output name="output_data_out" ftype="txt" value="output_data_out.txt"/>
    </test>
  </tests>
  <help><![CDATA[This application allows reprojecting and rasterize a vector dataset. The grid of the rasterized output can be set by using a reference image, or by setting all parmeters (origin, size, spacing) by hand. In the latter case, at least the spacing (ground sampling distance) is needed (other parameters are computed automatically). The rasterized output can also be in a different projection reference system than the input dataset. There are two rasterize mode available in the application. The first is the binary mode: it allows rendering all pixels belonging to a geometry of the input dataset in the foreground color, while rendering the other in background color. The second one allows rendering pixels belonging to a geometry woth respect to an attribute of this geometry. The field of the attribute to render can be set by the user. In the second mode, the background value is still used for unassociated pixels.]]></help>
  <citations>
    <citation type="bibtex">Josh</citation>
  </citations>
</tool>
