<tool name="SAGA.ta_slope_stability.1" id="saga_ta_slope_stability_1" version="1.0.0">
  <description>TOBIA</description>
  <requirements>
    <requirement version="3.9" type="package">python</requirement>
  </requirements>
  <version_command><![CDATA[interpreter filename.exe --version]]></version_command>
  <command><![CDATA[$__tool_directory__/Code/openapi.py isArrayA False  isArrayB False  isArrayC False  isArrayD False  output_data_E $output_data_E  output_data_F $output_data_F  name SAGA.ta_slope_stability.1 A $A
B $B
C $C
D $D
fB $fB
fC $fC
prefer $prefer
response $response
outputType_E $OutputSection_E.outputType_E
transmissionMode_E $OutputSection_E.transmissionMode_E
outputType_F $OutputSection_F.outputType_F
transmissionMode_F $OutputSection_F.transmissionMode_F]]></command>
  <inputs>
    <param name="A" type="data" optional="false" label="Slope grid (rad)" help="Slope grid (rad) The following data types are allowed in the txt file:  x-ogc-envi, x-ogc-aaigrid, png, tiff" format="txt"/>
    <param name="B" type="data" optional="false" label="Aspect grid (rad)" help="Aspect grid (rad) The following data types are allowed in the txt file:  x-ogc-envi, x-ogc-aaigrid, png, tiff" format="txt"/>
    <param name="C" type="data" optional="false" label="Dip grid (degrees) " help="A grid representing the dip of the structure plane (in degrees) The following data types are allowed in the txt file:  x-ogc-envi, x-ogc-aaigrid, png, tiff" format="txt"/>
    <param name="D" type="data" optional="false" label="Dip direction grid (degrees) " help="A grid representing the dip direction of the structure plane (in degrees) The following data types are allowed in the txt file:  x-ogc-envi, x-ogc-aaigrid, png, tiff" format="txt"/>
    <param name="fB" type="float" value="45" optional="true" label="Global structure dip (degrees)" help="Constant value if no raster set"/>
    <param name="fC" type="float" value="90" optional="true" label="Global structure dip direction (degrees)" help="Constant value if no raster set"/>
    <param name="prefer" type="select" label="Choose the Prefer">
      <option selected="true" value="respond-async;return=representation">respond-async;return=representation</option>
      <option value="return=minimal">return=minimal</option>
      <option value="return=representation">return=representation</option>
    </param>
    <param name="response" type="select" label="Response Type" help="Choose 'raw' for raw data or 'document' for document data.">
      <option selected="true" value="document">document</option>
      <option value="raw">raw</option>
    </param>
    <section name="OutputSection_E" title="Select the appropriate transmission mode for the output format" expanded="true">
      <param name="outputType_E" type="select" label="TOBIA classes" help="Resulting TOBIA classes (1-7) grid">
        <option value="application/x-ogc-aaigrid">x-ogc-aaigrid</option>
        <option value="application/x-ogc-envi">x-ogc-envi</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_E" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
    <section name="OutputSection_F" title="Select the appropriate transmission mode for the output format" expanded="true">
      <param name="outputType_F" type="select" label="TOBIA index" help="Resulting TOBIA index (-) grid">
        <option value="application/x-ogc-aaigrid">x-ogc-aaigrid</option>
        <option value="application/x-ogc-envi">x-ogc-envi</option>
        <option value="image/png">png</option>
        <option value="image/tiff">tiff</option>
      </param>
      <param name="transmissionMode_F" type="select" label="Choose the transmission mode">
        <option selected="true" value="reference">reference</option>
        <option value="value">value</option>
      </param>
    </section>
  </inputs>
  <outputs>
    <data name="output_data_E" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_E" format="x-ogc-envi" value="application/x-ogc-envi"/>
        <when input="outputType_E" format="x-ogc-aaigrid" value="application/x-ogc-aaigrid"/>
        <when input="outputType_E" format="png" value="image/png"/>
      </change_format>
    </data>
    <data name="output_data_F" format="tiff" hidden="false">
      <change_format>
        <when input="response" format="txt" value="document"/>
        <when input="outputType_F" format="x-ogc-envi" value="application/x-ogc-envi"/>
        <when input="outputType_F" format="x-ogc-aaigrid" value="application/x-ogc-aaigrid"/>
        <when input="outputType_F" format="png" value="image/png"/>
      </change_format>
    </data>
  </outputs>
  <tests>
    <test>
      <output name="output_data" value="txt"/>
      <param name="response" value="document"/>
    </test>
  </tests>
  <help><![CDATA[&lt;br/&gt;This tool computes both a continuous and a categorical TOBIA (Topography Bedding Intersection Angle) Index according to Meentemeyer & Moody (2000) For computation, a slope and a aspect raster (both in radians) determining slope face orientations are required. The categorical TOBIA classifies the alignement of a geological structure to Topography into seven classes:&lt;br/&gt;0) Underdip slope&lt;br/&gt;1) Dip slope&lt;br/&gt;2) Overdip slope&lt;br/&gt;3) Steepened escarpmemt&lt;br/&gt;4) Normal escarpment&lt;br/&gt;5) Subdued escarpment&lt;br/&gt;6) Orthoclinal slope&lt;br/&gt;The continuous TOBIA index ranges from -1 to 1 (parallel orientation)&lt;br/&gt;The structure TOBIA should be calculated with can be set either distributed (through dip direction and dip grids, in degrees!), or globally using integers (dip and dip direction, in degrees!). The tool creates a TOBIA class integer grid, and (optionally) a continuous TOBIA index grid.&lt;br/&gt;&lt;br/&gt;Reference: &lt;a href="http://www.sciencedirect.com/science/article/pii/S009830040000011X"&gt;Meentemeyer R. K., Moody A. (2000). Automated mapping of conformity between topographic and geological surfaces. Computers & Geosciences, 26, 815 - 829&lt;/a&gt;.&lt;br/&gt;]]></help>
  <citations>
    <citation type="bibtex">Josh</citation>
  </citations>
</tool>
